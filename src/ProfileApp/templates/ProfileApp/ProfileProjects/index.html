{% load static %}
{% load base_tags %}
{% load project_tags %}

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">

    {% include "CoreApp/HeadSetup/index.html" %}

    <link rel='stylesheet' href='{% static "CoreApp/icons/files/file-icons.css" %}'/>
    <link rel="stylesheet" href='{% static "ProfileApp/style.css" %}'> <!-- Стили страницы -->
    <link rel="stylesheet" href='{% static "CoreApp/text/ql-editor.css" %}'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css"/>
    
    <title>Личный кабинет {{ requested_user }}</title>
</head>

<body>

    {% include "CoreApp/AsideMenu/index.html" with user=user %}

    <section class="mainContainer">
        {% include "ProfileApp/ProfileBar/index.html" with requested_user=requested_user active='projects' %}

        <div class="profileContent column g24 scrollbar">
            
            <div class="profile__tabs">

                <div class="profile__tab active" id='projectTab'>  
                    <section class="projects">
                        
                        {% for project in projects %}
                        <div class="project" onclick="location.href = `{% url 'project_info' project.id %}`">
                            <img src="{{ project.image.url }}" class="project__illustration">
                            <div class="project__content">
                                <p class="project__title">{{ project.title }}</p>
                                <p class="project__description">{{ project.description|get_text }}</p>
                                
                                <div class="project__info">
                                    <div class="column g8">
                                        <p>Направление</p>
                                        
                                        <div class="row g8">
                                            {% for subject in project.course_subject|get_objects %}
                                            <span class="tag">{{ subject.name }}</span>
                                            {% endfor %}
                                        </div>
                                    </div>

                                    <div class="column g8">
                                        <p>Статус</p>
                                        <span class="tag">{{ project|get_type }}</span>
                                    </div>

                                    <div class="column g8">
                                        <p>Набор участников</p>
                                        <span class="tag">Открыт</span>
                                    </div>
                                    
                                    <div class="column g8">
                                        <p>Участники</p>
                                        <div class="project__members members">
                                            <div class="member" title="Фамилия Имя">
                                                <img src="{{ project.teamleader.image.url }}" class="avatar">
                                            </div>
        
                                            {% for user in project.team|get_objects %}
                                            <div class="member" title="Фамилия Имя">
                                                <img src="{{ user.image.url }}" class="avatar">
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </section>
                </div>

            </div>
        </div>
    </section>

    <!-- Повестка дня -->
    <section class="agenda" id="agenda">
        <div class="agenda__container">
            <div class="agenda__lesson">
                <p class="time">8:00</p>
                <div class="column">
                    <p class="title">Группа</p>
                    <p class="text">Тема занятия</p>
                    <div class="row g8">
                        <button class="secondaryButton">
                            <svg viewBox="0 0 640 512">
                                <path d="M0 256C0 167.6 71.63 96 160 96H256C273.7 96 288 110.3 288 128C288 145.7 273.7 160 256 160H160C106.1 160 64 202.1 64 256C64 309 106.1 352 160 352H256C273.7 352 288 366.3 288 384C288 401.7 273.7 416 256 416H160C71.63 416 0 344.4 0 256zM480 416H384C366.3 416 352 401.7 352 384C352 366.3 366.3 352 384 352H480C533 352 576 309 576 256C576 202.1 533 160 480 160H384C366.3 160 352 145.7 352 128C352 110.3 366.3 96 384 96H480C568.4 96 640 167.6 640 256C640 344.4 568.4 416 480 416zM416 224C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H224C206.3 288 192 273.7 192 256C192 238.3 206.3 224 224 224H416z"/>
                            </svg>
                            Журнал
                        </button>
                    </div>
                </div>
            </div>
            <div class="agenda__lesson">
                <p class="time">10:15</p>
                <div class="column">
                    <p class="title">Группа</p>
                    <p class="text">Тема занятия</p>
                    <div class="row g8">
                        <button class="secondaryButton">
                            <svg viewBox="0 0 640 512">
                                <path d="M0 256C0 167.6 71.63 96 160 96H256C273.7 96 288 110.3 288 128C288 145.7 273.7 160 256 160H160C106.1 160 64 202.1 64 256C64 309 106.1 352 160 352H256C273.7 352 288 366.3 288 384C288 401.7 273.7 416 256 416H160C71.63 416 0 344.4 0 256zM480 416H384C366.3 416 352 401.7 352 384C352 366.3 366.3 352 384 352H480C533 352 576 309 576 256C576 202.1 533 160 480 160H384C366.3 160 352 145.7 352 128C352 110.3 366.3 96 384 96H480C568.4 96 640 167.6 640 256C640 344.4 568.4 416 480 416zM416 224C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H224C206.3 288 192 273.7 192 256C192 238.3 206.3 224 224 224H416z"/>
                            </svg>
                            Журнал
                        </button>
                    </div>
                </div>
            </div>
            <div class="agenda__lesson">
                <p class="time">11:45</p>
                <div class="column">
                    <p class="title">Группа</p>
                    <p class="text">Тема занятия</p>
                    <div class="row g8">
                        <button class="secondaryButton">
                            <svg viewBox="0 0 640 512">
                                <path d="M0 256C0 167.6 71.63 96 160 96H256C273.7 96 288 110.3 288 128C288 145.7 273.7 160 256 160H160C106.1 160 64 202.1 64 256C64 309 106.1 352 160 352H256C273.7 352 288 366.3 288 384C288 401.7 273.7 416 256 416H160C71.63 416 0 344.4 0 256zM480 416H384C366.3 416 352 401.7 352 384C352 366.3 366.3 352 384 352H480C533 352 576 309 576 256C576 202.1 533 160 480 160H384C366.3 160 352 145.7 352 128C352 110.3 366.3 96 384 96H480C568.4 96 640 167.6 640 256C640 344.4 568.4 416 480 416zM416 224C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H224C206.3 288 192 273.7 192 256C192 238.3 206.3 224 224 224H416z"/>
                            </svg>
                            Журнал
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="alertsContainer column" id='alertsContainer'>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> <!-- JQuery -->

    <script src="{% static 'ProfileApp/script.js' %}"></script>
</body>

</html>