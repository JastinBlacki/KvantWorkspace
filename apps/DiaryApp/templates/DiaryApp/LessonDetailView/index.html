{% load static %}
<div class="header flex space-between">
    <div class='row g8'>
        <button onclick="$('#lessonView').toggleClass('active')" class='actionButton transparent closeButton'>
            <svg viewBox="0 0 14 14" style='transform: rotate(180deg)'>
                <g transform="translate(-5 -5)">
                    <rect width="2" height="14" rx="1" transform="translate(5 13) rotate(-90)" opacity='0.3'/>
                    <path d="M9.707-15.707a1,1,0,0,0-1.414,0,1,1,0,0,0,0,1.414l6,6a1,1,0,0,0,1.383.03l6-5.5a1,1,0,0,0,.062-1.413,1,1,0,0,0-1.413-.061L15.03-10.384Z" transform="translate(27 27) rotate(-90)"/>
                </g>
            </svg>
        </button>
        <img src="{{ lesson.course.teacher.image.url }}" class="avatar">
        <div class='column'>
            <p style='color: var(--text-primary-color)'>
                {{ lesson.course.teacher.surname }}
                {{ lesson.course.teacher.name }}
            </p>
            <p>{{ lesson.course.teacher.permission }}</p>
        </div>
    </div>
    <div class="row">
        <button class='actionButton transparent' title='Перейти к проверке'>
            <svg viewBox="0 0 20 20">
                <path d="M15.5,4V6.5a1.667,1.667,0,0,1-1.667,1.667H7.167A1.667,1.667,0,0,1,5.5,6.5V4A2.5,2.5,0,0,0,3,6.5v10A2.5,2.5,0,0,0,5.5,19h10A2.5,2.5,0,0,0,18,16.5V6.5A2.5,2.5,0,0,0,15.5,4Z" transform="translate(-0.5 -0.667)"/>
                <rect width="8" height="5" rx="1" transform="translate(6 1)"/>
            </svg>                    
        </button>
        <button class='actionButton transparent' title='Удалить'>
            <svg viewBox="0 0 16 16.001">
                <path d="M17.2,5.2h-4V3.864A1.936,1.936,0,0,0,11.2,2H8.8a1.936,1.936,0,0,0-2,1.864V5.2h-4a.8.8,0,0,0,0,1.6h.8v8.8A2.4,2.4,0,0,0,6,18h8a2.4,2.4,0,0,0,2.4-2.4V6.8h.8a.8.8,0,0,0,0-1.6ZM8.4,3.864c0-.128.168-.264.4-.264h2.4c.232,0,.4.136.4.264V5.2H8.4Z" transform="translate(-2 -1.999)"/>
            </svg>                          
        </button>
    </div>
</div>

<hr class="divider" style='margin: 0 0 1.5rem'>
<div class="lessonView__content column g16 scrollbar">
    <div class="flex space-between items-center">
        <h1>{{ lesson.title }}</h1>
        <button class='actionButton transparent' title='Редактировать' onclick="open_form('#editLessonForm')">
            <svg viewBox="0 0 14.002 14.003">
                <path d="M3,14.247v2.365A.385.385,0,0,0,3.389,17H5.753a.365.365,0,0,0,.272-.117L14.519,8.4,11.6,5.481,3.117,13.967a.382.382,0,0,0-.117.28Zm13.775-8.1a.775.775,0,0,0,0-1.1l-1.82-1.82a.775.775,0,0,0-1.1,0L12.435,4.648l2.917,2.917,1.423-1.423Z" transform="translate(-3 -2.998)"/>
            </svg>                          
        </button>
    </div>
    
    <div class="ql-snow">
        <div class="ql-editor">
            <p>{{ lesson.description|safe }}</p>
        </div>
    </div>
    
    <div class='files'>
        {% include "SystemModule/FileView/index.html" with files=lesson.files %}
    </div>

    {% if lesson.task %}
    <div class="flex space-between items-center">
        <h1>Домашнее задание</h1>
        <button class='actionButton transparent' title='Редактировать' onclick="open_form('#editHomeworkForm')">
            <svg viewBox="0 0 14.002 14.003">
                <path d="M3,14.247v2.365A.385.385,0,0,0,3.389,17H5.753a.365.365,0,0,0,.272-.117L14.519,8.4,11.6,5.481,3.117,13.967a.382.382,0,0,0-.117.28Zm13.775-8.1a.775.775,0,0,0,0-1.1l-1.82-1.82a.775.775,0,0,0-1.1,0L12.435,4.648l2.917,2.917,1.423-1.423Z" transform="translate(-3 -2.998)"/>
            </svg>                          
        </button>
    </div>
    
    <div class="ql-snow">
        <div class="ql-editor">
            <p>{{ lesson.task.task|safe }}</p>
        </div>
    </div>
    
    <div class='files'>
        {% include "SystemModule/FileView/index.html" with files=lesson.task.files %}
    </div>

    <div class="flex space-between items-center">
        <h1>Отправить работу</h1>
        <div class="row g8">
            <button class='primaryButton'>
                <svg xmlns="http://www.w3.org/2000/svg" width="14.666" height="16" viewBox="0 0 14.666 16">
                    <g transform="translate(-8.667 -8)">
                        <path opacity='0.3' d="M10.667,12.5a3.171,3.171,0,0,1,3.167-3.167h6.089A1.832,1.832,0,0,0,18.167,8H10.5A1.835,1.835,0,0,0,8.667,9.833V20.166A1.835,1.835,0,0,0,10.5,22h.167Z"/>
                        <path d="M21.5,10.667H13.833A1.835,1.835,0,0,0,12,12.5v9.667A1.835,1.835,0,0,0,13.833,24H21.5a1.835,1.835,0,0,0,1.833-1.833V12.5A1.835,1.835,0,0,0,21.5,10.667ZM20.167,22h-5a.5.5,0,0,1,0-1h5a.5.5,0,0,1,0,1Zm0-2.667h-5a.5.5,0,0,1,0-1h5a.5.5,0,0,1,0,1Zm0-2.333h-5a.5.5,0,0,1,0-1h5a.5.5,0,0,1,0,1Zm0-2.667h-5a.5.5,0,0,1,0-1h5a.5.5,0,0,1,0,1Z"/>
                    </g>
                </svg>
                Документ
            </button>
            <button class="secondaryButton">
                Отправить
                <svg viewBox="0 0 320 512">
                    <path opacity='0.6' d="M232 160v328a24 24 0 0 1-24 24H12a12 12 0 0 1-8.48-20.48l56-56A12 12 0 0 1 68 432h84V160z"></path>
                    <path d="M88 160c-20.94 0-31.76-25-17.6-40.33l104-112c.4-.43.82-.86 1.26-1.26a24 24 0 0 1 33.91 1.26l104 112C327.82 135 316.84 160 296 160z"></path>
                </svg>
            </button>
        </div>
    </div>
    <div id="editor" style='background-color: var(--item-bg-color)'></div>
    <div class='files'>
        <!-- Спавн файлов :\ -->
    </div>
    {% endif %}
</div>